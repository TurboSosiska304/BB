<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Body & Breast Calculator ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa7bd;--accent:#60a5fa;--accent-2:#7c3aed;--glass:rgba(255,255,255,0.04)}
    *{box-sizing:border-box;font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071029 0%, #0b1220 100%);color:#e6eef8}
    .container{max-width:980px;margin:36px auto;padding:24px}
    .header{display:flex;gap:16px;align-items:center}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:20px;color:white;box-shadow:0 6px 18px rgba(12,18,30,0.6)}
    h1{margin:0;font-size:20px}
    p.lead{color:var(--muted);margin:6px 0 18px}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:20px}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}

    label{display:block;font-size:13px;color:var(--muted);margin-bottom:8px}
    input[type="number"], select{width:100%;padding:10px;border-radius:8px;background:var(--glass);border:1px solid rgba(255,255,255,0.03);color:inherit}
    select {color: black;}
    .row{display:flex;gap:12px}
    .col{flex:1}
    .btn{display:inline-flex;gap:8px;align-items:center;padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;color:white;font-weight:600;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
    .muted{color:var(--muted);font-size:13px}

    .outputs{display:flex;flex-direction:column;gap:10px}
    .out{background:linear-gradient(90deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
    .out h3{margin:0;font-size:14px}
    .out p{margin:6px 0 0;color:var(--muted)}

    .small{font-size:13px;color:var(--muted)}
    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}

    @media(max-width:900px){.grid{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">BB</div>
      <div>
        <h1>Body &amp; Breast Calculator</h1>
        <p class="lead">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å—á—ë—Ç–∞ –æ–±—Ö–≤–∞—Ç–æ–≤, –º–∞—Å—Å—ã –≥—Ä—É–¥–∏ –∏ –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í–≤–æ–¥–∏ —Ç–æ, —á—Ç–æ –∑–Ω–∞–µ—à—å ‚Äî –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ—Å—á–∏—Ç–∞–µ–º.</p>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2 style="margin-top:0">–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>

        <label>–í—ã–±–µ—Ä–∏ —Ä–µ–∂–∏–º —Ä–∞—Å—á—ë—Ç–∞</label>
        <select id="mode">
          <option value="v1">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è ‚Äî —Ä–æ—Å—Ç + –≤–µ—Å</option>
          <option value="v2">–°—Ä–µ–¥–Ω—è—è ‚Äî —Ä–æ—Å—Ç + –≤–µ—Å + —Ç–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ</option>
          <option value="v3" selected>–ü–æ–ª–Ω–∞—è ‚Äî —Ä–æ—Å—Ç + –≤–µ—Å + —Ç–∞–ª–∏—è + –±—ë–¥—Ä–∞ (+ –Ω–æ–≥–∏)</option>
        </select>

        <div style="height:12px"></div>

        <div class="row">
          <div class="col">
            <label>–†–æ—Å—Ç (—Å–º)</label>
            <input id="height" type="number" value="170" min="120" max="230">
          </div>
          <div class="col">
            <label>–í–µ—Å (–∫–≥)</label>
            <input id="weight" type="number" value="63" min="30" max="200">
          </div>
        </div>

        <div style="height:12px"></div>

        <div id="extra-1">
          <label>–¢–∏–ø —Ç–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω)</label>
          <select id="bodytype">
            <option value="average">–°—Ä–µ–¥–Ω—è—è</option>
            <option value="slim">–°—Ç—Ä–æ–π–Ω–∞—è</option>
            <option value="curvy">–ü—ã—à–Ω–∞—è</option>
          </select>
        </div>

        <div style="height:12px"></div>

        <div id="full-inputs">
          <label>–û–±—Ö–≤–∞—Ç —Ç–∞–ª–∏–∏ (—Å–º)</label>
          <input id="waist" type="number" value="67" min="45" max="160">
          <div style="height:8px"></div>
          <label>–û–±—Ö–≤–∞—Ç –±—ë–¥–µ—Ä (—Å–º)</label>
          <input id="hips" type="number" value="98" min="50" max="170">
          <div style="height:8px"></div>
          <label>–î–ª–∏–Ω–∞ –Ω–æ–≥–∏ (—Å–º) ‚Äî –æ—Ç –ø–∞—Ö–∞ –¥–æ –ø–æ–ª–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
          <input id="leg" type="number" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä 92" min="40" max="130">
        </div>

        <div style="height:14px"></div>

        <div class="row">
          <button class="btn" id="calc">‚úÖ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
          <button class="btn ghost" id="reset">–°–±—Ä–æ—Å</button>
        </div>

        <div style="height:10px"></div>
        <p class="small">–ü–æ–¥—Å—á—ë—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–µ –∏ —Å–ª—É–∂–∞—Ç –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π/—Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –ø–æ–¥–≥–æ–Ω–∫–∏.</p>
      </div>

      <div class="card">
        <h2 style="margin-top:0">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
        <div class="outputs">
          <div class="out" id="out-measures"><h3>–û–±—Ö–≤–∞—Ç—ã</h3><p id="measures">‚Äî</p></div>
          <div class="out" id="out-mass"><h3>–ú–∞—Å—Å–∞ –≥—Ä—É–¥–∏</h3><p id="mass">‚Äî</p></div>
          <div class="out" id="out-ai"><h3>–ò–Ω–¥–µ–∫—Å –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3><p id="ai">‚Äî</p></div>
        </div>

        <div style="height:12px"></div>
        <div style="display:flex;gap:8px">
          <button class="btn" id="copy">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
          <button class="btn ghost" id="example">üîç –ü—Ä–∏–º–µ—Ä (170/63/92/67)</button>
        </div>

      </div>
    </div>

    <footer>–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è ‚Äî –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã, –Ω–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.</footer>
  </div>

<script>
// === –§–æ—Ä–º—É–ª—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –∏–∑ –±–æ—Ç–∞ ===
// –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å ReferenceError
const a1 = 125.66, c1 = 50.84; // –≥—Ä—É–¥—å = a1 * v_r + c1
const ta1 = 85, cta1 = 45;     // —Ç–∞–ª–∏—è = ta1 * v_r + cta1
const ba1 = 130, cba1 = 55;    // –±—ë–¥—Ä–∞ = ba1 * v_r + cba1

function breast_mass_js({a=null,b=null,c=null,bust=null,underbust=null,r_sosok=1.0,h_sosok=1.0,rho=1.02}){
  if (bust!=null && underbust!=null){
    c = (bust - underbust)/2.0;
    a = c*0.6;
    b = c*0.8;
  }
  if (a==null || b==null || c==null) throw '–ù—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ª–∏–±–æ a,b,c, –ª–∏–±–æ bust –∏ underbust.';
  const V_grud = (2/3) * Math.PI * a * b * c;
  const V_sosok = Math.PI * Math.pow(r_sosok,2) * h_sosok;
  const V_total = V_grud + V_sosok;
  const M_grud_kg = V_total * rho / 1000.0;
  const M_total_kg = M_grud_kg * 2.0;
  // –∞–Ω–∞–ª–æ–≥–∏–∏
  let analog_one = '';
  if (M_grud_kg < 0.5) analog_one = '–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–ª–æ—Å–∫–∞—è, 1 —Ä–∞–∑–º–µ—Ä';
  else if (M_grud_kg < 0.9) analog_one = '–ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –ª–∞–¥–æ–Ω—å (2 —Ä–∞–∑–º–µ—Ä)';
  else if (M_grud_kg < 1.3) analog_one = '–ø—Ä–∏–º–µ—Ä–Ω–æ –º—É–∂—Å–∫–∞—è –ø—Ä–∏–≥–æ—Ä—à–Ω—è (3 —Ä–∞–∑–º–µ—Ä)';
  else analog_one = '–≤ –ª–∞–¥–æ–Ω—å –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è, 4+ —Ä–∞–∑–º–µ—Ä';
  let analog_both = '';
  if (M_total_kg < 1.0) analog_both = '–¥–≤–µ –≥—Ä—É–¥–∏ –≤–º–µ—Å—Ç–µ –º–∞–ª–µ–Ω—å–∫–∏–µ';
  else if (M_total_kg < 2.0) analog_both = '–¥–≤–µ –≥—Ä—É–¥–∏ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ —Ä—É–∫–∏';
  else if (M_total_kg < 2.6) analog_both = '–¥–≤–µ –≥—Ä—É–¥–∏ –∫–∞–∫ –¥–≤–µ –ø—Ä–∏–≥–æ—Ä—à–Ω–∏';
  else analog_both = '–æ—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–µ, –±–æ–ª—å—à–µ –¥–≤—É—Ö —Ä—É–∫';
  return {M_grud_kg,M_total_kg,analog_one,analog_both};
}

function attractiveness_with_balance_js(bust, waist, hips, height=null, leg_length=null){
  const alpha = 1.1; const beta = 1.3; const k = 100.0;
  const WHR = waist / hips;
  const BWR = bust / waist;
  const hip_to_waist = hips / waist;
  let H_factor = 1.0;
  if (height!=null){ H_factor = 1.0 - Math.min(Math.abs(height - 170)/200.0, 0.4); }
  const base_AI = k * (Math.pow(BWR, alpha) * Math.pow(hip_to_waist, beta) * H_factor) / (Math.abs(WHR - 0.7) + 1.0);
  const bust_hips_ratio = bust / hips;
  const balance_bust_hips = 1.0 - Math.min(Math.abs(bust_hips_ratio - 1.0)/0.5, 0.6);
  const waist_ideal = 0.7 * hips;
  const balance_waist = 1.0 - Math.min(Math.abs(waist - waist_ideal)/(0.4 * hips + 1e-9), 0.6);
  const balance_score = (balance_bust_hips + balance_waist)/2.0;
  let balance_multiplier = 0.85 + (balance_score - 0.4) * (0.3 / 0.6);
  balance_multiplier = Math.max(0.75, Math.min(balance_multiplier, 1.25));
  let leg_multiplier = 1.0;
  if (leg_length!=null && height!=null && height>0){
    const leg_ratio = leg_length/height;
    const ideal_leg = 0.53;
    leg_multiplier = 1.0 - Math.min(Math.abs(leg_ratio - ideal_leg)/0.2, 0.5);
    leg_multiplier = 0.75 + (leg_multiplier - 0.5) * (0.5 / 0.5);
    leg_multiplier = Math.max(0.6, Math.min(leg_multiplier, 1.3));
  }
  const total_AI = base_AI * balance_multiplier * leg_multiplier;
  let desc = '';
  if (total_AI < 75) desc = '–æ–±—ã—á–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏, –Ω–µ–≤—ã—Å–æ–∫–∞—è –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å';
  else if (total_AI < 110) desc = '–ø—Ä–∏—è—Ç–Ω—ã–µ –∏ –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏';
  else if (total_AI < 150) desc = '–≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞—è –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–≥—É—Ä–∞';
  else desc = '–æ—á–µ–Ω—å –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞—è, —è—Ä–∫–æ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–≥—É—Ä–∞';
  return {
    AI_basic: Number(base_AI.toFixed(2)),
    balance_multiplier: Number(balance_multiplier.toFixed(3)),
    leg_multiplier: Number(leg_multiplier.toFixed(3)),
    AI_total: Number(total_AI.toFixed(2)),
    description: desc,
    components: {WHR: Number(WHR.toFixed(3)), BWR: Number(BWR.toFixed(3)), bust_hips_ratio: Number(bust_hips_ratio.toFixed(3)), waist_ideal: Number((0.7*hips).toFixed(2)), leg_ratio: (leg_length && height)?Number((leg_length/height).toFixed(3)):null}
  };
}

// === helpers ===
function clamp(n,min,max){return Math.max(min,Math.min(max,n))}

// === UI wiring ===
const modeEl = document.getElementById('mode');
const heightEl = document.getElementById('height');
const weightEl = document.getElementById('weight');
const bodytypeEl = document.getElementById('bodytype');
const waistEl = document.getElementById('waist');
const hipsEl = document.getElementById('hips');
const legEl = document.getElementById('leg');
const calcBtn = document.getElementById('calc');
const resetBtn = document.getElementById('reset');
const outMeasures = document.getElementById('measures');
const outMass = document.getElementById('mass');
const outAi = document.getElementById('ai');
const copyBtn = document.getElementById('copy');
const exampleBtn = document.getElementById('example');

function updateVisibility(){
  const mode = modeEl.value;
  document.getElementById('extra-1').style.display = (mode==='v2')? 'block':'none';
  document.getElementById('full-inputs').style.display = (mode==='v3')? 'block':'none';
}
modeEl.addEventListener('change', updateVisibility);
updateVisibility();

function computeAll(){
  const mode = modeEl.value;
  const height = Number(heightEl.value);
  const weight = Number(weightEl.value);
  let waist = Number(waistEl.value);
  let hips = Number(hipsEl.value);
  let leg = legEl.value?Number(legEl.value):null;

  let chest;
  if (mode==='v1'){
    const v_r = weight/height;
    chest = a1 * v_r + c1;
    waist = ta1 * v_r + cta1;
    hips = ba1 * v_r + cba1;
  } else if (mode==='v2'){
    const v_r = weight/height;
    const map = {slim:0.95, average:1.0, curvy:1.05};
    const k = map[bodytypeEl.value]||1.0;
    chest = (a1 * v_r + c1) * k;
    waist = (ta1 * v_r + cta1) * k;
    hips = (ba1 * v_r + cba1) * k;
  } else {
    chest = 0.3*weight + 0.1*height + 0.5*waist + 10;
    // hip already from input
  }

  // round for display
  chest = Number(chest.toFixed(1)); waist = Number(waist.toFixed(1)); hips = Number(hips.toFixed(1));

  // mass
  let massRes = null; try{ massRes = breast_mass_js({bust:chest, underbust:waist}); }catch(e){ massRes=null }
  // attractiveness
  let ai = null; try{ ai = attractiveness_with_balance_js(chest, waist, hips, height, (leg||null)); }catch(e){ ai=null }

  outMeasures.innerText = `–ì—Ä—É–¥—å: ${chest} —Å–º\n–¢–∞–ª–∏—è: ${waist} —Å–º\n–ë—ë–¥—Ä–∞: ${hips} —Å–º`;
  outMass.innerText = massRes? `–û–¥–Ω–∞: ${massRes.M_grud_kg.toFixed(2)} –∫–≥ ‚Äî ${massRes.analog_one}\n–û–±–µ: ${massRes.M_total_kg.toFixed(2)} –∫–≥ ‚Äî ${massRes.analog_both}` : '‚Äî';
  outAi.innerText = ai? `–ò–Ω–¥–µ–∫—Å: ${ai.AI_total}\n${ai.description}\n(WHR=${ai.components.WHR}, BWR=${ai.components.BWR}, –±–∞–ª–∞–Ω—Å=${ai.balance_multiplier}, –Ω–æ–≥–∏=${ai.leg_multiplier})` : '‚Äî';
}

calcBtn.addEventListener('click', computeAll);
resetBtn.addEventListener('click', ()=>{heightEl.value='170';weightEl.value='63';waistEl.value='67';hipsEl.value='98';legEl.value='';bodytypeEl.value='average';modeEl.value='v3';updateVisibility();outMeasures.innerText='‚Äî';outMass.innerText='‚Äî';outAi.innerText='‚Äî';});
exampleBtn.addEventListener('click', ()=>{heightEl.value='170';weightEl.value='63';waistEl.value='67';hipsEl.value='98';legEl.value='92';computeAll();});
copyBtn.addEventListener('click', ()=>{navigator.clipboard.writeText(`–ì—Ä—É–¥—å: ${outMeasures.innerText}\n\n${outMass.innerText}\n\n${outAi.innerText}`);alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!');});

</script>
</body>
</html>
